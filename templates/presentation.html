<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>{{ titulo }}</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    #controle {
      margin-bottom: 20px;
    }
    #controle label {
      margin-right: 10px;
    }
    #letra p {
      margin: 0.5em 0;
    }
  </style>
</head>
<body>
  <h1>{{ titulo }}</h1>
  <h3>Autor: {{ autor }}</h3>

  <div id="controle">
    <label for="velocidadeInput">Velocidade (segundos por linha):</label>
    <input type="number" id="velocidadeInput" value="3" min="0.1" step="0.1">
    <button onclick="iniciarRolagem()">Iniciar Rolagem</button>
  </div>

  <div id="letra">
    {% for linha in cifra.split('\n') %}
      <p>{{ linha }}</p>
    {% endfor %}
  </div>

  <script>
    const paragrafos = document.querySelectorAll('#letra p');
    let index = 0;
    let rolagemAtiva = false;

    function iniciarRolagem() {
      if (rolagemAtiva) return; // Evita múltiplas execuções
      rolagemAtiva = true;
      index = 0;
      scrollLinha();
    }

    function scrollLinha() {
      if (index < paragrafos.length) {
        paragrafos[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
        index++;
        const velocidade = parseFloat(document.getElementById("velocidadeInput").value) || 3;
        setTimeout(scrollLinha, velocidade * 1000);
      } else {
        rolagemAtiva = false;
      }
    }
  </script>
</body>
</html>
